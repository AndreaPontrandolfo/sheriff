---
sidebar_position: 16
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

# ⚡ Performance tips

Depending on the device you are operating on, in-editor performance can be a concern with Sheriff.<br />
typescript-eslint can be particularly taxing on the system, so some performance considerations are in order.

## Rules performance benchmarking

The slowest rules in Sheriff are the ones that [require type information](https://typescript-eslint.io/getting-started/typed-linting/) to work.

typescript-eslint maintains a [list of type-aware rules](https://typescript-eslint.io/rules/?=typeInformation), which can help track them down.

You can benchmark rule performance by running the following in a terminal:

```bash npm2yarn
TIMING=1 npx eslint
```

Learn more on the official ESLint docs page on [profiling rule performance](https://eslint.org/docs/latest/extend/custom-rules#profile-rule-performance).

:::warning

If typed linting is enabled, the first typescript-eslint rule to run will look a lot slower, when, in reality, all typescript-eslint rules are at minimum as slow as a `tsc` run, but the output is cached.
For more information, see [Slow ESLint Rules § Performance | typescript-eslint](https://typescript-eslint.io/troubleshooting/typed-linting/performance/#slow-eslint-rules).

:::

## Rule performance optimization strategies

You can leverage a few different techniques to improve slow linting time.<br />
You can choose one technique to employ or mix-and-match them.

### Disable some of the heaviest rules

After profiling rules, you can assess which of the slowest rules you can live without and disable them.

### Enable some of the heaviest rules only on CI

This approach has a little more overhead, but you could try to run the heaviest rules only on CI.

Here is an example of how to achieve this:

<Tabs groupId="tsorjs">
  <TabItem value="JS" label="JS">

```js title="eslint.config.js"
import { sheriff, tseslint } from "eslint-config-sheriff";

const sheriffOptions = {
  react: false,
  next: false,
  astro: false,
  lodash: false,
  remeda: false,
  playwright: false,
  jest: false,
  vitest: false,
};

export default tseslint.config(sheriff(sheriffOptions), {
  rules: {
    // highlight-next-line
    "@typescript-eslint/no-misused-promises": process.env.CI ? 2 : 0,
  },
});
```

  </TabItem>
  <TabItem value="TS" label="TS">

```ts title="eslint.config.ts"
import { sheriff, type SheriffSettings, tseslint } from "eslint-config-sheriff";

const sheriffOptions: SheriffSettings = {
  react: false,
  next: false,
  astro: false,
  lodash: false,
  remeda: false,
  playwright: false,
  jest: false,
  vitest: false,
};

export default tseslint.config(sheriff(sheriffOptions), {
  rules: {
    // highlight-next-line
    "@typescript-eslint/no-misused-promises": process.env.CI ? 2 : 0,
  },
});
```

  </TabItem>
</Tabs>

There is a tradeoff here, as this approach is a DX degradation that can lead to developer frustration,
because code that is perfectly valid local environment could still fail in CI.

You may find typescript-eslint’s [`disableTypeChecked`](https://typescript-eslint.io/users/configs/#disable-type-checked) config useful in these scenarios.

{/* Caching does not handle cross-file dependencies, breaking typescript-eslint and eslint-plugin-import: <https://typescript-eslint.io/troubleshooting/faqs/eslint/#can-i-use-eslints---cache-with-typescript-eslint> */}
{/* ### Adopt ESLint’s cache

ESLint features an internal cache where you can store your previous runs.

This technique has no downsides, and you should employ it in any case regardless.

Read the official docs on ESLint caching here: [Caching § Command Line Interface Reference](https://eslint.org/docs/latest/use/command-line-interface#caching).<br />
If your project lives in a monorepo, you can follow [this guide](https://www.shew.dev/monorepos/guardrails/eslint) instead. */}

### Review glob patterns

ESLint, TypeScript and Sheriff use minimatch syntax to handle glob patterns.<br />
Wide glob patterns (in particular, the usage of globstars[^1]) can lead to performance degradations.

Pay special attention to:

- [Specifying `file` and `ignores` § Configuration Files - ESLint](https://eslint.org/docs/latest/use/configure/configuration-files#specifying-files-and-ignores)
- [Wide includes in your `tsconfig` § Performance | typescript-eslint](https://typescript-eslint.io/troubleshooting/performance-troubleshooting/#wide-includes-in-your-tsconfig)
- [Sheriff’s `files` option](./configuration.mdx#files)
- [Sheriff’s `pathsOverrides` options](./configuration.mdx#pathsoverrides)
  - [Wide globs in `parserOptions.project` § Monorepo Configuration | typescript-eslint](https://typescript-eslint.io/troubleshooting/typed-linting/monorepos/#wide-globs-in-parseroptionsproject)

[^1]: A globstar is a `**` pattern.
